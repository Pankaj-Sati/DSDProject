<ion-header>

  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-row>
      <ion-col col-7 style="text-align:left">
        <ion-title>Payments</ion-title>
      </ion-col>
      <ion-col col-5 style="margin:auto;" (click)="addBalance()">
       <ion-label style="float:right;margin-right:10px;color:white;font-size:16px;"> <ion-icon name="add" style="color:white;zoom:1;padding:5px;"></ion-icon>Add Balance</ion-label>
      </ion-col>
    </ion-row>

  </ion-navbar>
</ion-header>

<ion-content>
  <div *ngIf="clientDetails!=null && clientDetails!=undefined">
    <ion-row>
      <ion-col col-6>
        <ion-row>
          <ion-col>
            <b>Client Name</b>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col>
            {{clientDetails.name}}
          </ion-col>
        </ion-row>
      </ion-col>

      <ion-col col-6>
        <ion-row>
          <ion-col>
            <b>Alien No.</b>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col>
            {{clientDetails.case_no}}
          </ion-col>
        </ion-row>
      </ion-col>

    </ion-row>

    <ion-row>
      <ion-col col-6>
        <ion-row>
          <ion-col>
            <b>Total Balance</b>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col>
            4576
          </ion-col>
        </ion-row>
      </ion-col>

      <ion-col col-6>
        <ion-row>
          <ion-col>
            <b>Outstanding Balance</b>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col>
            23
          </ion-col>
        </ion-row>
      </ion-col>

    </ion-row>

    <ion-row>
      <ion-col col-6>
        <ion-row>
          <ion-col>
            <b>Total Payment</b>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col>
            457
          </ion-col>
        </ion-row>
      </ion-col>

    </ion-row>

    <hr>

    <ion-row>

      <ion-col style="text-align:center;">
        <button ion-button round (click)="toggleAddPayment()">{{show_add_button_text}}</button>
      </ion-col>

    </ion-row>


    <div *ngIf="showAddPayment">

      <form [formGroup]="paymentForm">

        <ion-row>
          <ion-col col-6>
            <ion-item no-lines>
              <ion-label stacked>Payment Mode <span class="mandatory_field">*</span></ion-label>
              <ion-select required placeholder="Select" interface="popover" formControlName="p_mode">
                <ion-option value="0" (ionSelect)="modeChanged(0)">Debit/Credit Card</ion-option>
                <ion-option value="1" (ionSelect)="modeChanged(1)">Via Bank Transfer</ion-option>
                <ion-option value="2" (ionSelect)="modeChanged(2)">Payment By Cash</ion-option>
              </ion-select>
            </ion-item>
          </ion-col>

          <ion-col col-6>
            <ion-item no-lines>
              <ion-label stacked>Amount<span class="mandatory_field">*</span></ion-label>
              <ion-input type="number" required formControlName="p_amount"></ion-input>
            </ion-item>
          </ion-col>

        </ion-row>

        <ion-item no-lines>
          <ion-label stacked>Remark (If any)</ion-label>
          <ion-textarea formControlName="p_remark"></ion-textarea>
        </ion-item>

        <div *ngIf="paymentForm.value.p_mode==0">

          <!------------Credit or Debit Card----------->
          <ion-item no-lines>
            <ion-label stacked>Card Holder Name<span class="mandatory_field">*</span></ion-label>
            <ion-input type="text" required formControlName="p_card_holder_name"></ion-input>
          </ion-item>

          <ion-item no-lines>
            <ion-label stacked>Card No.<span class="mandatory_field">*</span></ion-label>
            <ion-input type="number" required formControlName="p_card_no"></ion-input>
          </ion-item>

          <ion-item no-lines>
            <ion-label stacked>CVV Code<span class="mandatory_field">*</span></ion-label>
            <ion-input type="number" required formControlName="p_card_cvv"></ion-input>
          </ion-item>

          <ion-item no-lines>
            <ion-label stacked>Card Expiration Date <span class="mandatory_field">*</span></ion-label>

              <ion-datetime [pickerOptions]="customPickerOptions" placeholder="Select Month and year" displayFormat="MM/YY" formControlName="p_card_exp" (ionChange)="printLog()">
              </ion-datetime>
         
          </ion-item>



          
          

        </div>

        <div *ngIf="paymentForm.value.p_mode==1">
          <!-------------Bank Transfer----------------->
          <ion-item no-lines>
            <ion-label stacked>Bank Name<span class="mandatory_field">*</span></ion-label>
            <ion-input required formControlName="p_bank_name"></ion-input>
          </ion-item>

          <ion-item no-lines>
            <ion-label stacked>Account Holder Name<span class="mandatory_field">*</span></ion-label>
            <ion-input required formControlName="p_bank_acc_holder_name"></ion-input>
          </ion-item>

          <ion-item no-lines>
            <ion-label stacked>Account Number<span class="mandatory_field">*</span></ion-label>
            <ion-input type="number" required formControlName="p_bank_acc_no"></ion-input>
          </ion-item>

          <ion-item no-lines>
            <ion-label stacked>Branch Code<span class="mandatory_field">*</span></ion-label>
            <ion-input required formControlName="p_bank_branch_code"></ion-input>
          </ion-item>

          <ion-item no-lines>
            <ion-label stacked>Branch Number<span class="mandatory_field">*</span></ion-label>
            <ion-input required formControlName="p_bank_branch_number"></ion-input>
          </ion-item>

        </div>


        <ion-row>
          <ion-col style="text-align:center;">
            <button [disabled]="!paymentForm.valid" ion-button (click)="submitPayment()">Submit</button>
          </ion-col>
        </ion-row>

      </form>


    </div>
  </div>
</ion-content>
