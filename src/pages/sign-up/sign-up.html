<ion-header>
  <ion-navbar>
    <ion-title>Sign Up</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>

  <ion-item no-lines class="profile-item">
    <div class="profile-picture">
      <img src="assets/imgs/logo.png" style="background-color:gray;background-image: linear-gradient(#48c6ef , #6f86d6);"><br><br>

    </div>
  </ion-item>

  <h2 style='text-align: center;'>Welcome to Dalbir's Law Firm</h2>

  <ion-row>

    <ion-col col-6 style="text-align:right">
      <button ion-button [color]="isNew?'success':'disabled'" icon-start (click)="setIsNew(true)"><ion-icon  [name]="isNew?'checkmark':''"></ion-icon>New Client</button>
    </ion-col>

    <ion-col col-6 style="text-align:left">
      <button ion-button [color]="!isNew?'success':'disabled'" icon-start  (click)="setIsNew(false)"><ion-icon [name]="!isNew?'checkmark':''"></ion-icon>Existing Client</button>

    </ion-col>
  </ion-row>
    
<hr />

  <form [formGroup]="userForm">

    <ion-list>

      <ion-item no-lines [ngClass]="{'error':userForm.controls.u_name.touched && ! userForm.controls.u_name.valid,'valid':(userForm.controls.u_name.touched && userForm.controls.u_name.valid)}" [class.invalid]="userForm.controls.u_name.touched && ! userForm.controls.u_name.valid">

        <ion-label style="color:unset;">Full Name <span class="requiredField">*</span>:</ion-label>
        <ion-input type="text" formControlName="u_name" name="full_name"></ion-input>
      </ion-item>


      <ion-item no-lines [ngClass]="{'error':userForm.controls.u_dob.touched && ! userForm.controls.u_dob.valid,'valid':(userForm.controls.u_dob.touched && userForm.controls.u_dob.valid)}" [class.invalid]="userForm.controls.u_dob.touched && !userForm.controls.u_dob.valid">

        <ion-label style="color:unset;">Date Of Birth <span class="requiredField">*</span>:</ion-label>
        <ion-datetime displayFormat="MMM DD YY" placeholder="Select" formControlName="u_dob" name="date_of_birth"></ion-datetime>
      </ion-item>


      <ion-row>
        <ion-col col-10 style="padding:0px;">
          <ion-item no-lines style="padding-left: 0px;margin-left: 15px;" [ngClass]="{'error':userForm.controls.u_alien.touched && ! userForm.controls.u_alien.valid,'valid':(userForm.controls.u_alien.touched && userForm.controls.u_alien.valid)}" [class.invalid]="userForm.controls.u_alien.touched && ! userForm.controls.u_alien.valid">
            <ion-label style="color:unset;">Alien No.:</ion-label>
            <ion-input type="text" formControlName="u_alien"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col *ngIf="!isNew" col-2 style="padding:0px;">
          <button ion-button class="findButton" [disabled]="userForm.value.u_alien.length==0" (click)="searchForExistingClient()">Find</button>
        </ion-col>
      </ion-row>
      



      <ion-item no-lines [ngClass]="{'error':userForm.controls.u_contact.touched && !userForm.controls.u_contact.valid,'valid':(userForm.controls.u_contact.touched && userForm.controls.u_contact.valid)}" [class.invalid]="userForm.controls.u_contact.touched && !userForm.controls.u_contact.valid">
        <ion-label style="color:unset;">Contact No. <span class="requiredField">*</span>:</ion-label>
        <ion-input type="tel" [brmasker]="{mask:'(000)-000-0000', len:14, type:'number'}" formControlName="u_contact" name="contact"></ion-input>
      </ion-item>

      <ion-item no-lines [ngClass]="{'error':userForm.controls.u_alt.touched && ! userForm.controls.u_alt.valid,'valid':(userForm.controls.u_alt.touched && userForm.controls.u_alt.valid)}" [class.invalid]="userForm.controls.u_alt.touched && ! userForm.controls.u_alt.valid">
        <ion-label style="color:unset;">Alternative No.:</ion-label>
        <ion-input type="tel" [brmasker]="{mask:'(000)-000-0000', len:14, type:'number'}" formControlName="u_alt" name="alt"></ion-input>
      </ion-item>

      <ion-item no-lines [ngClass]="{'error':userForm.controls.u_email.touched && ! userForm.controls.u_email.valid,'valid':(userForm.controls.u_email.touched && userForm.controls.u_email.valid)}" [class.invalid]="userForm.controls.u_email.touched && ! userForm.controls.u_email.valid">
        <ion-label style="color:unset;">Email <span class="requiredField">*</span>:</ion-label>
        <ion-input type="email" formControlName="u_email" name="email"></ion-input>
      </ion-item>

      <ion-item no-lines [ngClass]="{'error':userForm.controls.u_street.touched && !userForm.controls.u_street.valid,'valid':(userForm.controls.u_street.touched && userForm.controls.u_street.valid)}" [class.invalid]="userForm.controls.u_street.touched && ! userForm.controls.u_street.valid">

        <ion-label style="color:unset;">Address <span class="requiredField">*</span>:</ion-label>
        <ion-input type="text" formControlName="u_street" name="street"></ion-input>
      </ion-item>

      <ion-item no-lines [ngClass]="{'error':userForm.controls.u_state.touched && ! userForm.controls.u_state.valid,'valid':(userForm.controls.u_state.touched && userForm.controls.u_state.valid)}" [class.invalid]="userForm.controls.u_state.touched && ! userForm.controls.u_state.valid">

        <ion-label style="color:unset;">State <span class="requiredField">*</span>:</ion-label>
        <ion-input type="text" formControlName="u_state" name="state"></ion-input>
      </ion-item>

      <ion-item no-lines [ngClass]="{'error':userForm.controls.u_city.touched && ! userForm.controls.u_city.valid,'valid':(userForm.controls.u_city.touched && userForm.controls.u_city.valid)}" [class.invalid]="userForm.controls.u_city.touched && ! userForm.controls.u_city.valid">

        <ion-label style="color:unset;">City or Town <span class="requiredField">*</span>:</ion-label>
        <ion-input type="text" formControlName="u_city" name="city"></ion-input>
      </ion-item>

      <ion-item no-lines [ngClass]="{'error':userForm.controls.u_country.touched && ! userForm.controls.u_country.valid,'valid':(userForm.controls.u_country.touched && userForm.controls.u_country.valid)}" [class.invalid]="userForm.controls.u_country.touched && ! userForm.controls.u_country.valid">

        <ion-label style="color:unset;">Country <span class="requiredField">*</span>:</ion-label>
        <ion-select formControlName="u_country" name="country">
          <ion-option value="UnitedStates">United States</ion-option>
        </ion-select>
      </ion-item>

      <ion-item no-lines [ngClass]="{'error':userForm.controls.u_pincode.touched && ! userForm.controls.u_pincode.valid,'valid':( userForm.controls.u_pincode.touched && userForm.controls.u_pincode.valid)}" [class.invalid]="userForm.controls.u_pincode.touched && ! userForm.controls.u_pincode.valid">

        <ion-label style="color:unset;">Zip code <span class="requiredField">*</span>:</ion-label>
        <ion-input type="number" formControlName="u_pincode" name="pincode"></ion-input>
      </ion-item>

      <ion-item no-lines [ngClass]="{'error':userForm.controls.u_case_type.touched && ! userForm.controls.u_case_type.valid,'valid':( userForm.controls.u_case_type.touched && userForm.controls.u_case_type.valid)}" [class.invalid]="userForm.controls.u_case_type.touched && ! userForm.controls.u_case_type.valid">

        <ion-label style="color:unset;">Case Type:</ion-label>
        <ion-select interface="popover" placeholder="Select" formControlName="u_case_type">
          <ion-option *ngFor="let caseType of caseTypeList" value="{{caseType.id}}">{{caseType.case_type}}</ion-option>
        </ion-select>
      </ion-item>

      <ion-item *ngIf="!isNew" no-lines [ngClass]="{'error':userForm.controls.u_case_manager.touched && ! userForm.controls.u_case_manager.valid,'valid':( userForm.controls.u_case_manager.touched && userForm.controls.u_case_manager.valid)}" [class.invalid]="userForm.controls.u_case_manager.touched && ! userForm.controls.u_case_manager.valid">

        <ion-label style="color:unset;">Case Manager</ion-label>
        <ion-select interface="action-sheet" placeholder="Select" formControlName="u_case_manager">
          <ion-option *ngFor="let advocate of advocate_list" value="{{advocate.id}}">{{advocate.name}} ({{advocate.id}})</ion-option>
        </ion-select>
      </ion-item>

    </ion-list>

  

    <ion-row>
      <ion-col style="text-align: center;padding:5px 32px;">
        <button ion-button round icon-end style="width:100%;" [disabled]="! userForm.valid" (click)="submitData()">Sign Up<ion-icon name="person"></ion-icon></button>
      </ion-col>
    </ion-row>
  </form>
</ion-content>

